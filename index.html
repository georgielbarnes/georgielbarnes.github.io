<!DOCTYPE html>
<html>
<head>
<style>
body {
  background-image: 
    linear-gradient(rgba(0,0,0,.20), rgba(0,0,0,.20)),
    linear-gradient(135deg,rgba(0, 204, 255, .07),rgba(255, 0, 204, .07)),
    url('assets/background.png');
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: 100% 100%;
}
h1.first {
  padding-top: 10%;
  color: white;
  font-family: GD Sherpa,Montserrat,sans-serif;
  font-weight: 900;
  letter-spacing: .12em;
  font-size: 64px;
  text-transform: uppercase;
  text-align: center;
  user-select:none;
}
p.main {
  padding-top: 25%;
  /*color:#6d6d6d;*/
  color: white;
  font-weight: 400;
  font-family: GD Sage,Playfair Display,Georgia,serif;
  font-size: 32px;
  text-align: center;
  user-select:none;
}

h1 span{display:inline-block}
p span{display:inline-block}

@keyframes jump{
  0%   {transform:translateY(0)}
  30%  {transform:translateY(-25%)}
  60%  {transform:translateY(10%)}
  100% {transform:translateY(0)}
}
.jump{
  animation:jump .8s cubic-bezier(.25,.75,.5,1) forwards;
}

@keyframes flip{
  0%   {transform:rotateY(0)}
  30%  {transform:rotateY(180deg)}
  60%  {transform:rotateY(360deg)}
  100% {transform:rotateY(360deg)}
}
.flip{
  animation:flip 1s ease-in-out forwards;
}


.rainbow-frame{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;                 
}

.rainbow-frame::before{
  content:'';
  position:absolute;
  inset:0;

  --thickness:22px;
  padding:var(--thickness);

  mask:
       linear-gradient(#000 0 0)  content-box,
       radial-gradient(closest-side,transparent  0%, #000 75%) padding-box;
  -webkit-mask-composite:xor;          
          mask-composite:exclude;      

  filter:blur(18px);

  opacity:.5;

  background:
      conic-gradient(
        #ff2d55 0deg   60deg,
        #ff9f0a 60deg  120deg,
        #ffd60a 120deg 180deg,
        #32d74b 180deg 240deg,
        #0a84ff 240deg 300deg,
        #bf5af2 300deg 360deg
      );
  background-size:400% 400%;                

  animation:rainbowFlow 20s linear infinite,
           rainbowPulse 12s ease-in-out   infinite;
}

@keyframes rainbowFlow{
  0%   {background-position:  0%   0%;}
  25%  {background-position:100%   0%;}
  50%  {background-position:100% 100%;}
  75%  {background-position:  0% 100%;}
  100% {background-position:  0%   0%;}
}

@keyframes rainbowPulse{
  0%,100%{background-size:400% 400%;}
  50%    {background-size:500% 500%;}
}
</style>

</head>
<body>
<div class="rainbow-frame" aria-hidden="true"></div>

<h1 class="first" id="banner">George Barnes</h1>

<p class="main" id="teaser">Launching once my degree is finished in June :)</p>


<script>
  (()=>{
  const WEIGHT_BANNER = 1.25;
  const WEIGHT_PARA   = 1;
  const effects       = ['jump','flip'];

  const bannerLetters = [];
  const paraLetters   = [];

  function wrapText(id, collectorArray){
    const node = document.getElementById(id);
    const txt  = node.textContent;
    node.innerHTML = '';

    for(const ch of txt){
      if(ch === ' '){
        node.appendChild(document.createTextNode(' '));
      }else{
        const span = document.createElement('span');
        span.textContent = ch;
        node.appendChild(span);
        collectorArray.push(span);
      }
    }
  }

  wrapText('banner', bannerLetters);
  wrapText('teaser', paraLetters);

  const rand     = arr => arr[Math.floor(Math.random() * arr.length)];
  let   busy     = false;

  setInterval(()=>{
    if(busy) return;

    const totalWeight  = WEIGHT_BANNER + WEIGHT_PARA;
    const pickBanner   = Math.random() < WEIGHT_BANNER / totalWeight;
    const pool         = pickBanner ? bannerLetters : paraLetters;

    if(pool.length === 0) return;

    const letter = rand(pool);
    const effect = rand(effects);

    busy = true;
    letter.classList.add(effect);

    letter.addEventListener('animationend', ()=>{
      letter.classList.remove(effect);
      busy = false;
    }, {once:true});

  }, 700);
})();
</script>
</body>
</html>
